"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[960],{9502:(e,l,n)=>{n.d(l,{A:()=>t});const t=n(6213).A.create({baseURL:"http://parseserver.us:4001",timeout:6e4,headers:{"Content-Type":"application/json"}})},9381:(e,l,n)=>{n.d(l,{A:()=>o});n(5043);var t=n(1637),i=n(7353),s=n(579);function o(){return(0,s.jsx)(i.A,{sx:{display:"flex",marginTop:5,marginBottom:5,justifyContent:"center"},children:(0,s.jsx)(t.A,{})})}},5960:(e,l,n)=>{n.r(l),n.d(l,{default:()=>$,fetchNews:()=>U});var t=n(5043),i=n(9502),s=n(4194),o=n(9135),r=n(4535),a=n(7353),d=n(1596),c=n(7067),u=n(5795),h=n(1906),p=n(9190),x=n(8988),v=n(6980),g=n(3561),m=n(579);const j=e=>{let{value:l,handleChange:n,options:t,name:i,label:s}=e;return(0,m.jsx)(a.A,{sx:{minWidth:120},children:(0,m.jsxs)(v.A,{fullWidth:!0,children:[(0,m.jsx)(p.A,{id:`label_${i}`,children:s}),(0,m.jsxs)(g.A,{labelId:`label_${i}`,name:i,value:l,label:s,onChange:n,children:[(0,m.jsx)(x.A,{value:"",children:"Select"}),null===t||void 0===t?void 0:t.map((e=>(0,m.jsx)(x.A,{value:e.key,children:e.label},e.key)))]})]})})},y=(0,r.Ay)(d.A)((e=>{let{theme:l}=e;return{backgroundColor:"#fff",...l.typography.body2,padding:l.spacing(1),textAlign:"center",color:l.palette.text.secondary,...l.applyStyles("dark",{backgroundColor:"#1A2027"})}})),f=e=>{let{setVars:l}=e;const[n,i]=t.useState({province:"",topic:"",q:""}),s=e=>{i((l=>({...l,[e.target.name]:e.target.value})))},o=e=>{e.preventDefault(),l(n)};return(0,m.jsx)(a.A,{sx:{flexGrow:1},children:(0,m.jsx)("form",{onSubmit:o,children:(0,m.jsxs)(c.A,{container:!0,spacing:2,children:[(0,m.jsx)(c.A,{size:{xs:6,md:3},children:(0,m.jsx)(y,{children:(0,m.jsx)(j,{name:"province",label:"State",options:[{key:"california",label:"California"},{key:"indiana",label:"Indiana"}],value:n.province,handleChange:s})})}),(0,m.jsx)(c.A,{size:{xs:6,md:3},children:(0,m.jsx)(y,{children:(0,m.jsx)(j,{name:"topic",label:"Topic",options:[{key:"business",label:"Business"},{key:"entertainment",label:"Entertainment"},{key:"general",label:"General"},{key:"health",label:"Health"},{key:"sports",label:"Sports"},{key:"technology",label:"Technology"}],value:n.topic,handleChange:s})})}),(0,m.jsx)(c.A,{size:{xs:6,md:3},children:(0,m.jsx)(y,{children:(0,m.jsx)(u.A,{name:"q",label:"Keyword",variant:"outlined",type:"search",placeholder:"keyword to search",value:n.q,onChange:s,fullWidth:!0})})}),(0,m.jsx)(c.A,{size:{xs:6,md:3},children:(0,m.jsx)(y,{children:(0,m.jsx)(h.A,{variant:"contained",fullWidth:!0,type:"submit",onClick:o,sx:{height:55},children:"Search"})})})]})})})};var b=n(7122),w=n(9381),A=n(840),C=n(6178),k=n.n(C),S=n(5475);const I=e=>{var l;let{record:n}=e;return(0,m.jsx)("li",{style:{marginBottom:"30px"},children:(0,m.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,m.jsx)("div",{style:{maxWidth:"150px",position:"relative"},children:(0,m.jsx)("img",{src:null!==(l=n.urlToImage)&&void 0!==l?l:"https://www.pngitem.com/pimgs/m/439-4390399_placeholder-image-newsletter-clipart-hd-png-download.png",alt:"",style:{width:"100%"}})}),(0,m.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,m.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"10px"},children:(0,m.jsx)(S.N_,{to:`/detail/${n.id}`,children:n.title})}),(0,m.jsx)("div",{style:{fontSize:"12px",marginBottom:"10px"},children:n.description}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline",fontSize:"11px"},children:k()(n.publishedAt).fromNow()})]})]})})},U=async e=>{let{q:l,province:n,topic:t,page:s}=e;const o=`/news?province=${encodeURIComponent(n)}&topic=${encodeURIComponent(t)}&search=${encodeURIComponent(l)}&page=${s}`;return(await i.A.get(o)).data},$=()=>{var e,l,n,i,r,a,d,c;const[u,h]=(0,b.fp)(A.U3),[p,x]=t.useState(),[v,g]=t.useState({q:"",province:"",topic:""}),[j,y]=t.useState(!1),[C,k]=t.useState(0),[S,$]=t.useState(!1),[R,T]=t.useState(null),_=t.useMemo((()=>{var e,l;return null!==p&&void 0!==p&&null!==(e=p.results)&&void 0!==e&&e.totalPages?null===p||void 0===p||null===(l=p.results)||void 0===l?void 0:l.totalPages:0}),[null===p||void 0===p||null===(e=p.results)||void 0===e?void 0:e.totalPages]),q=t.useMemo((()=>{let e=`${C}_100`;return v.province&&(e+=`_${encodeURIComponent(v.province)}`),v.topic&&(e+=`_${encodeURIComponent(v.topic)}`),v.q&&(e+=`_${encodeURIComponent(v.q)}`),e}),[C,v]),z=(0,t.useCallback)(((e,l)=>{h((n=>({...n,[e]:l})))}),[h]),W=t.useCallback((async e=>{try{if(!j)return;if($(!0),T(null),u[q]&&!e){var l;const e=(new Date).getTime(),n=null===(l=u[q])||void 0===l?void 0:l.expiryRef;if(n){const l=e-n;if(Math.round(l/1e3)<=7200)return console.log("data from cache: ",q,", ",u[q]),void x(u[q])}}console.log("fresh data: ",q);const n=await U({page:C,...v});z(q,{...n,expiryRef:(new Date).getTime(),stateKey:q}),x(n)}catch(n){n instanceof Error?T(n.message):"string"===typeof n&&T(n)}finally{$(!1)}}),[C,v,q,z,u,j]);return t.useEffect((()=>{W()}),[W]),t.useEffect((()=>{y(!0)}),[]),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{id:"filter-box",children:(0,m.jsx)(f,{setVars:g})}),(0,m.jsxs)("div",{id:"content",children:[R&&(0,m.jsx)("div",{children:(0,m.jsx)(s.A,{severity:"error",children:R})}),S&&(0,m.jsx)(w.A,{}),(null===p||void 0===p||null===(l=p.results)||void 0===l?void 0:l.rows)&&(null===p||void 0===p||null===(n=p.results)||void 0===n||null===(i=n.rows)||void 0===i?void 0:i.length)>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("ul",{children:null===p||void 0===p||null===(r=p.results)||void 0===r||null===(a=r.rows)||void 0===a?void 0:a.map((e=>(0,m.jsx)(I,{record:e},e.objectId)))}),(0,m.jsx)("div",{children:(0,m.jsx)(o.A,{count:_,page:C+1,onChange:(e,l)=>{k(l-1),window.scrollTo(0,0)}})})]}),(!(null!==p&&void 0!==p&&null!==(d=p.results)&&void 0!==d&&d.rows)||0===(null===p||void 0===p||null===(c=p.results)||void 0===c?void 0:c.rows.length))&&!S&&!R&&(0,m.jsx)("div",{style:{marginTop:20},children:(0,m.jsx)(s.A,{severity:"warning",children:"No News Found."})})]})]})}},840:(e,l,n)=>{n.d(l,{U3:()=>s,uk:()=>o});var t=n(3774),i=n(7020);(0,t.eU)({});const s=(0,i.tG)("newsObjectLS",{}),o=((0,t.eU)({}),(0,i.tG)("newsSingleObjectLS",{}))}}]);
//# sourceMappingURL=960.131076f0.chunk.js.map