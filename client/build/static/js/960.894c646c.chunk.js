"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[960],{9502:(e,l,n)=>{n.d(l,{A:()=>t});const t=n(6213).A.create({baseURL:"http://parseserver.us:4001",timeout:6e4,headers:{"Content-Type":"application/json"}})},9381:(e,l,n)=>{n.d(l,{A:()=>o});n(5043);var t=n(1637),i=n(7353),s=n(579);function o(){return(0,s.jsx)(i.A,{sx:{display:"flex",marginTop:5,marginBottom:5,justifyContent:"center"},children:(0,s.jsx)(t.A,{})})}},5960:(e,l,n)=>{n.r(l),n.d(l,{default:()=>R,fetchNews:()=>$});var t=n(5043),i=n(9502),s=n(3216),o=n(4194),a=n(9135),r=n(4535),d=n(7353),c=n(1596),u=n(7067),p=n(5795),h=n(1906),x=n(9190),v=n(8988),g=n(6980),m=n(3561),j=n(579);const y=e=>{let{value:l,handleChange:n,options:t,name:i,label:s}=e;return(0,j.jsx)(d.A,{sx:{minWidth:120},children:(0,j.jsxs)(g.A,{fullWidth:!0,children:[(0,j.jsx)(x.A,{id:`label_${i}`,children:s}),(0,j.jsxs)(m.A,{labelId:`label_${i}`,name:i,value:l,label:s,onChange:n,children:[(0,j.jsx)(v.A,{value:"",children:"Select"}),null===t||void 0===t?void 0:t.map((e=>(0,j.jsx)(v.A,{value:e.key,children:e.label},e.key)))]})]})})},f=(0,r.Ay)(c.A)((e=>{let{theme:l}=e;return{backgroundColor:"#fff",...l.typography.body2,padding:l.spacing(1),textAlign:"center",color:l.palette.text.secondary,...l.applyStyles("dark",{backgroundColor:"#1A2027"})}})),b=e=>{let{setVars:l}=e;const[n,i]=t.useState({province:"",topic:"",q:""}),s=e=>{i((l=>({...l,[e.target.name]:e.target.value})))},o=e=>{e.preventDefault(),l(n)};return(0,j.jsx)(d.A,{sx:{flexGrow:1},children:(0,j.jsx)("form",{onSubmit:o,children:(0,j.jsxs)(u.A,{container:!0,spacing:2,children:[(0,j.jsx)(u.A,{size:{xs:6,md:3},children:(0,j.jsx)(f,{children:(0,j.jsx)(y,{name:"province",label:"State",options:[{key:"california",label:"California"},{key:"indiana",label:"Indiana"}],value:n.province,handleChange:s})})}),(0,j.jsx)(u.A,{size:{xs:6,md:3},children:(0,j.jsx)(f,{children:(0,j.jsx)(y,{name:"topic",label:"Topic",options:[{key:"business",label:"Business"},{key:"entertainment",label:"Entertainment"},{key:"general",label:"General"},{key:"health",label:"Health"},{key:"sports",label:"Sports"},{key:"technology",label:"Technology"}],value:n.topic,handleChange:s})})}),(0,j.jsx)(u.A,{size:{xs:6,md:3},children:(0,j.jsx)(f,{children:(0,j.jsx)(p.A,{name:"q",label:"Keyword",variant:"outlined",type:"search",placeholder:"keyword to search",value:n.q,onChange:s,fullWidth:!0})})}),(0,j.jsx)(u.A,{size:{xs:6,md:3},children:(0,j.jsx)(f,{children:(0,j.jsx)(h.A,{variant:"contained",fullWidth:!0,type:"submit",onClick:o,sx:{height:55},children:"Search"})})})]})})})};var w=n(7122),A=n(9381),C=n(840),k=n(6178),S=n.n(k),I=n(5475);const U=e=>{var l;let{record:n}=e;return(0,j.jsx)("li",{style:{marginBottom:"30px"},children:(0,j.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,j.jsx)("div",{style:{maxWidth:"150px",position:"relative"},children:(0,j.jsx)("img",{src:null!==(l=n.urlToImage)&&void 0!==l?l:"https://www.pngitem.com/pimgs/m/439-4390399_placeholder-image-newsletter-clipart-hd-png-download.png",alt:"",style:{width:"100%"}})}),(0,j.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,j.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px",marginBottom:"10px"},children:(0,j.jsx)(I.N_,{to:`/detail/${n.id}`,children:n.title})}),(0,j.jsx)("div",{style:{fontSize:"12px",marginBottom:"10px"},children:n.description}),(0,j.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline",fontSize:"11px"},children:S()(n.publishedAt).fromNow()})]})]})})},$=async e=>{let{q:l,province:n,topic:t,page:s}=e;const o=`/news?province=${encodeURIComponent(n)}&topic=${encodeURIComponent(t)}&search=${encodeURIComponent(l)}&page=${s}`;return(await i.A.get(o)).data},R=()=>{var e,l,n,i,r,d,c,u;const p=(0,s.g)(),h=(0,s.Zp)(),[x,v]=(0,w.fp)(C.U3),[g,m]=t.useState(),[y,f]=t.useState({q:"",province:"",topic:""}),[k,S]=t.useState(!1),[I,R]=t.useState(null!==p&&void 0!==p&&p.page?parseInt(p.page,10):0),[T,_]=t.useState(!1),[q,z]=t.useState(null),W=t.useMemo((()=>{var e,l;return null!==g&&void 0!==g&&null!==(e=g.results)&&void 0!==e&&e.totalPages?null===g||void 0===g||null===(l=g.results)||void 0===l?void 0:l.totalPages:0}),[null===g||void 0===g||null===(e=g.results)||void 0===e?void 0:e.totalPages]),B=t.useMemo((()=>{let e=`${I}_100`;return y.province&&(e+=`_${encodeURIComponent(y.province)}`),y.topic&&(e+=`_${encodeURIComponent(y.topic)}`),y.q&&(e+=`_${encodeURIComponent(y.q)}`),e}),[I,y]),N=(0,t.useCallback)(((e,l)=>{v((n=>({...n,[e]:l})))}),[v]),D=t.useCallback((async e=>{try{if(!k)return;if(_(!0),z(null),x[B]&&!e){var l;const e=(new Date).getTime(),n=null===(l=x[B])||void 0===l?void 0:l.expiryRef;if(n){const l=e-n;if(Math.round(l/1e3)<=7200)return console.log("data from cache: ",B,", ",x[B]),void m(x[B])}}console.log("fresh data: ",B);const n=await $({page:I,...y});N(B,{...n,expiryRef:(new Date).getTime(),stateKey:B}),m(n)}catch(n){m(null),n instanceof Error?z(n.message):"string"===typeof n&&z(n)}finally{_(!1)}}),[I,y,B,N,x,k]);return t.useEffect((()=>{D()}),[D]),t.useEffect((()=>{S(!0)}),[]),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{id:"filter-box",children:(0,j.jsx)(b,{setVars:f})}),(0,j.jsxs)("div",{id:"content",children:[q&&(0,j.jsx)("div",{children:(0,j.jsx)(o.A,{severity:"error",children:q})}),T&&(0,j.jsx)(A.A,{}),(null===g||void 0===g||null===(l=g.results)||void 0===l?void 0:l.rows)&&(null===g||void 0===g||null===(n=g.results)||void 0===n||null===(i=n.rows)||void 0===i?void 0:i.length)>0&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("ul",{children:null===g||void 0===g||null===(r=g.results)||void 0===r||null===(d=r.rows)||void 0===d?void 0:d.map((e=>(0,j.jsx)(U,{record:e},e.objectId)))}),(0,j.jsx)("div",{children:(0,j.jsx)(a.A,{count:W,page:I+1,onChange:(e,l)=>{R(l-1),h("/"+(l-1)),window.scrollTo(0,0)}})})]}),(!(null!==g&&void 0!==g&&null!==(c=g.results)&&void 0!==c&&c.rows)||0===(null===g||void 0===g||null===(u=g.results)||void 0===u?void 0:u.rows.length))&&!T&&!q&&(0,j.jsx)("div",{style:{marginTop:20},children:(0,j.jsx)(o.A,{severity:"warning",children:"No News Found."})})]})]})}},840:(e,l,n)=>{n.d(l,{U3:()=>s,uk:()=>o});var t=n(3774),i=n(7020);(0,t.eU)({});const s=(0,i.tG)("newsObjectLS",{}),o=((0,t.eU)({}),(0,i.tG)("newsSingleObjectLS",{}))}}]);
//# sourceMappingURL=960.894c646c.chunk.js.map