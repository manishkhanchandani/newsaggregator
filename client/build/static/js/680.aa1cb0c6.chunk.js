"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[680],{9502:(e,t,i)=>{i.d(t,{A:()=>n});const n=i(6213).A.create({baseURL:"http://parseserver.us:4001",timeout:6e4,headers:{"Content-Type":"application/json"}})},9381:(e,t,i)=>{i.d(t,{A:()=>a});i(5043);var n=i(1637),s=i(7353),l=i(579);function a(){return(0,l.jsx)(s.A,{sx:{display:"flex",marginTop:5,marginBottom:5,justifyContent:"center"},children:(0,l.jsx)(n.A,{})})}},3680:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p,fetchNews:()=>x});var n=i(5043),s=i(3216),l=i(7122),a=i(6178),o=i.n(a),r=i(4194),d=i(9502),c=i(840),u=i(9381),f=i(579);const x=async e=>{const t=`/news/${e}`;return(await d.A.get(t)).data},p=()=>{const e=(0,s.g)(),{id:t}=e,[i,a]=(0,l.fp)(c.uk),[d,p]=n.useState(null),[v,h]=n.useState(!1),[y,m]=n.useState(!1),[g,j]=n.useState(null),w=n.useMemo((()=>`detail_${t}`),[t]),b=n.useCallback(((e,t)=>{a((i=>({...i,[e]:t})))}),[a]),A=n.useCallback((async e=>{try{if(!v)return;if(m(!0),j(null),i[w]&&!e){var n;const e=(new Date).getTime(),t=null===(n=i[w])||void 0===n?void 0:n.expiryRef;if(t){const n=e-t;if(Math.round(n/1e3)<=86400)return console.log("data from cache: ",w,", ",i[w]),void p(i[w])}}console.log("fresh data: ",w);const s=await x(t);b(w,{...s,expiryRef:(new Date).getTime(),stateKey:w}),p(s)}catch(s){s instanceof Error?j(s.message):"string"===typeof s&&j(s)}finally{m(!1)}}),[t,w,b,i,v]);return n.useEffect((()=>{A()}),[A]),n.useEffect((()=>{h(!0)}),[]),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{children:null===d||void 0===d?void 0:d.title}),g&&(0,f.jsx)("div",{children:(0,f.jsx)(r.A,{severity:"error",children:g})}),y&&(0,f.jsx)(u.A,{}),d&&(0,f.jsx)("div",{children:(0,f.jsxs)("div",{style:{gap:"16px",marginTop:"20px"},children:[(null===d||void 0===d?void 0:d.urlToImage)&&(0,f.jsx)("div",{style:{maxWidth:"100%",position:"relative"},children:(0,f.jsx)("img",{src:null===d||void 0===d?void 0:d.urlToImage,alt:"",style:{width:"100%"}})}),(0,f.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",marginTop:"30px"},children:[(0,f.jsx)("div",{style:{flex:1,fontSize:"18px",marginBottom:"10px"},children:null===d||void 0===d?void 0:d.description}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline",fontSize:"11px"},children:o()(null===d||void 0===d?void 0:d.publishedAt).fromNow()})]})]})})]})}},840:(e,t,i)=>{i.d(t,{U3:()=>l,uk:()=>a});var n=i(3774),s=i(7020);(0,n.eU)({});const l=(0,s.tG)("newsObjectLS",{}),a=((0,n.eU)({}),(0,s.tG)("newsSingleObjectLS",{}))}}]);
//# sourceMappingURL=680.aa1cb0c6.chunk.js.map